<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

    <title>My App</title>

    <link href="home.css" rel="stylesheet">
    <style>

    </style>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-mynav">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">My App</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="fname" role="button" data-bs-toggle="dropdown"
                            aria-expanded="false">
                            ...
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <li><a class="dropdown-item" onclick="logout()">Logout</a></li>
                        </ul>
                    </li>
            </div>
        </div>
    </nav>
    <!--
  <div class="container-fluid p-3">
    <div class="card">

      <img src="' + item.avatar + '" width="200px" id="avatar"></td>
      <div class="card-body">
        <p class="card-text" id="username">...</p><br>
        <p class="card-text" id="full_name">...</p><br>
        <p class="card-text" id="phone_number">...</p><br>
        <p class="card-text" id="email_address">...</p><br>
        <p class="card-text" id="pp_url">...</p><br>
      </div>
    </div>
  </div>
-->

<div class="fullbody3">
    <div class="card">
        <div class="img-wrapper">
            <img id="avatar" src="' + item.avatar + '" alt="Profile picture">
            <div class="overlay"></div>
        </div>
        <div class="details">
            <h2 id="full_name">Full Name</h2>
            <div class="contact-info">
                <ul>
                    <li><i class="fas fa-phone-alt"></i> <span id="phone_number">Phone Number</span></li>
                    <li><i class="fas fa-envelope"></i> <span id="email_address">Email Address</span></li>
                </ul>
            </div>
        </div>

        <div class="mycenter">
            <button class="mybutton5" type="button" onclick="logout()">LogOut</button>
            <button class="mybutton6" type="button" onclick="logout()">LogOut</button>
        </div>
    </div>
</div>


    <div class="loginuser">
        <a href="#"><i class="fab fa-twitter"></i></a>
        <a href="#"><i class="fab fa-linkedin-in"></i></a>
        <a href="#"><i class="fab fa-dribbble"></i></a>
    </div>

    <div class="bouthcard">
        <div class="fullbody">
            <div class="card">
                <div class="img-wrapper">
                    <img id="avatar" src="' + item.avatar + '" alt="Profile picture">
                    <div class="overlay"></div>
                </div>
                <div class="details">
                    <h2 id="full_name">Full Name</h2>
                    <p id="username">@username</p>
                    <div class="contact-info">
                        <ul>
                            <li><i class="fas fa-phone-alt"></i> <span id="phone_number">Phone Number</span></li>
                            <li><i class="fas fa-envelope"></i> <span id="email_address">Email Address</span></li>
                        </ul>
                    </div>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-linkedin-in"></i></a>
                        <a href="#"><i class="fab fa-dribbble"></i></a>
                    </div>
                </div>
                <button class="w-100 btn btn-lg btn-primary mt-3" type="submit" onclick=" window.location.href = './Home2.html'">Go Home- 2</button>
                <button class="w-100 btn btn-lg btn-primary mt-3" type="submit" onclick="goBack()">Go Back</button>

            </div>
        </div>
        <div class="fullbody2">
            <div class="card2">
                <p class="titlelogin">Login to view more detailed description and advanced SQL, PLSQL code.</p>
                <li>Registered users can see more detailed descriptions of various posts.</li>
                <li>Anyone can see various examples of SQL, PLSQL code.</li>
                <li>Can direct message for any assistance.</li>
                <li>In addition, there are other types of facilities.</li>

                <div class="mycenter2">
                    <a href="https://www.jaberit.com/p/login.html"><button class="button6"
                            type="button">Login</button></a>
                    <a href="https://www.jaberit.com/p/login.html"><button class="button6" type="button">Signup
                            Now</button></a>
                </div>
            </div>
        </div>
    </div>


    <script>

        const jwt = sessionStorage.getItem("jwt");
        if (jwt == null) {
            window.location.href = './login.html'
        }

        displayContent();

        function displayContent() {
  const fullbodydiv = document.querySelector('.fullbody');
  const fullbodydiv2 = document.querySelector('.fullbody2');
  const jwt = sessionStorage.getItem("jwt");

  if (jwt === null) {
    fullbodydiv2.style.display = "block";
    fullbodydiv.style.display = "none";
  } else {
    fullbodydiv.style.display = "block";
    fullbodydiv2.style.display = "none";
  }
}

        function loadUser(jwt) {
            const xhttp = new XMLHttpRequest();
            xhttp.open("GET", "https://apex.oracle.com/pls/apex/my_stock/BLOG_SITE_USERS/UserInfo/" + jwt);
            xhttp.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
            xhttp.setRequestHeader("Authorization", jwt);
            xhttp.send();
            xhttp.onreadystatechange = function () {
                if (this.readyState == 4) {
                    const response = JSON.parse(this.responseText);
                    console.log(response);
                    if (response.items.length > 0) {
                        const user = response.items[0];
                        document.getElementById("fname").innerHTML = user.full_name;
                        document.getElementById("avatar").src = user.pp_url;
                        document.getElementById("username").innerHTML = user.username;
                        document.getElementById("full_name").innerHTML = user.full_name;
                        document.getElementById("phone_number").innerHTML = user.phone_number;
                        document.getElementById("email_address").innerHTML = user.email_address;
                        document.getElementById("pp_url").innerHTML = user.pp_url;
                        document.getElementById("user_type").innerHTML = user.user_type;
                        console.log(user.user_type);
                    }
                }
            };
        }

        loadUser(jwt);
        showhide();


        function showhide() {
            const user_type = sessionStorage.getItem("user_type");
            if (user_type === "4" || user_type === "1") {
                document.querySelector(".loginuser").classList.add("show");
            } else {
                document.querySelector(".loginuser").classList.add("hide");
            }
        }

        function logout() {
            localStorage.clear();
            sessionStorage.clear();
            sessionStorage.removeItem("jwt");
            window.location.href = './login.html'
        }


        const card = document.querySelector('.card');
        const imgWrapper = document.querySelector('.img-wrapper');

        function resizeCard() {
            const width = card.offsetWidth;
            //imgWrapper.style.paddingTop = width + 'px';
        }

        window.addEventListener('resize', resizeCard);
        resizeCard();

    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4"
        crossorigin="anonymous"></script>

</body>

</html>