function insert_api_Data() {
    var fnameInput = document.getElementById("fnameInput");
    var phonenumber = document.getElementById("phonenumber");
    var emailaddress = document.getElementById("emailaddress");
    //var gender = document.getElementById("gender");
    var usernameInput = document.getElementById("username");
    var passwordInput = document.getElementById("password");
    var avatarInput = document.getElementById("avatar");
    var data = {
      FULL_NAME: fnameInput.value,
      PHONE_NUMBER: phonenumber.value,
      EMAIL_ADDRESS: emailaddress.value,
      //GENDER: gender.value,
      USERNAME: usernameInput.value,
      PASSWORD: passwordInput.value,
      PP_URL: avatarInput.value
    };
    var xhr = new XMLHttpRequest();
    xhr.open("POST", "https://apex.oracle.com/pls/apex/my_stock/BLOG_SITE_USERS/insert", true);
    xhr.setRequestHeader('Content-Type', 'application/json');
  
    var Toast = Swal.mixin({
      toast: true,
      position: 'top-end',
      showConfirmButton: false,
      timer: 3000,
      timerProgressBar: true,
      didOpen: (toast) => {
        toast.addEventListener('mouseenter', Swal.stopTimer)
        toast.addEventListener('mouseleave', Swal.resumeTimer)
      }
    });
  
    // check if the username is already used before submitting the data to the server
    var usernameExists = false;
    var xhrCheck = new XMLHttpRequest();
    xhrCheck.open("GET", "https://apex.oracle.com/pls/apex/my_stock/BLOG_SITE_USERS/view?username=" + encodeURIComponent(usernameInput.value), true);
    xhrCheck.onreadystatechange = function () {
      if (xhrCheck.readyState === 4) {
        if (xhrCheck.status === 200) {
          var response = JSON.parse(xhrCheck.responseText);
          if (response.items.length > 0) {
            usernameExists = true;
            console.log(response);
            Toast.fire({
              icon: 'error',
              title: 'Username already exists. Please choose another username.'
            });
          }
        } else {
          Toast.fire({
            icon: 'error',
            title: 'There was an error with your request. Please try again.'
          });
        }
      }
    };
    xhrCheck.send();
  
    // submit the data to the server only if the username is not already used
    xhr.onreadystatechange = function () {
      if (xhr.readyState === 4) {
        if (xhr.status === 200 && !usernameExists) {
          var response = xhr.responseText;
          console.log(response);
          Toast.fire({
            icon: 'success',
            title: 'Registration Successfully'
          });
          container.classList.remove("sign-up-mode");
        } else if (!usernameExists) {
          Toast.fire({
            icon: 'error',
            title: 'There was an error with your request. Please try again.'
          });
        }
      }
    };
  
    if (!usernameExists) {
      xhr.send(JSON.stringify(data));
    }
  };